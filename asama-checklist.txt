# Video Converter Sitesi - Ä°mplementasyon Checklist
**Google Cloud n2-standard-4 VPS iÃ§in AdÄ±m AdÄ±m Uygulama Rehberi**

---

## ğŸš€ **ADIM 1: Temel AltyapÄ± Kurulumu**
*Bu adÄ±mlarÄ± sÄ±rasÄ±yla tamamlayÄ±n. Her adÄ±m bir sonrakinin Ã¶n koÅŸuludur.*

### **1.1 Sunucu HazÄ±rlÄ±k Ä°ÅŸlemleri**
- [ ] **1.1.1** Ubuntu sistem gÃ¼ncellemesi: `sudo apt update && sudo apt upgrade -y`
- [ ] **1.1.2** Node.js kurulumu: `curl -fsSL https://deb.nodesource.com/setup_18.x | sudo -E bash -`
- [ ] **1.1.3** Node.js yÃ¼kleme: `sudo apt-get install -y nodejs`
- [ ] **1.1.4** PM2 global kurulum: `sudo npm install -g pm2`
- [ ] **1.1.5** FFmpeg kurulumu: `sudo apt install ffmpeg -y`

### **1.2 GÃ¼venlik KatmanÄ± Kurulumu**
- [ ] **1.2.1** ClamAV antivirÃ¼s kurulumu: `sudo apt install clamav clamav-daemon -y`
- [ ] **1.2.2** ClamAV veritabanÄ± gÃ¼ncelleme: `sudo freshclam`
- [ ] **1.2.3** ClamAV servisini baÅŸlatma: `sudo systemctl start clamav-daemon`
- [ ] **1.2.4** ClamAV otomatik baÅŸlatma: `sudo systemctl enable clamav-daemon`

### **1.3 Redis Kurulumu**
- [ ] **1.3.1** Redis server kurulumu: `sudo apt install redis-server -y`
- [ ] **1.3.2** Redis konfigÃ¼rasyonu: `sudo nano /etc/redis/redis.conf`
- [ ] **1.3.3** Redis ÅŸifre ayarlama: `requirepass your_strong_password`
- [ ] **1.3.4** Redis restart: `sudo systemctl restart redis-server`
- [ ] **1.3.5** Redis otomatik baÅŸlatma: `sudo systemctl enable redis-server`

---

## ğŸ“¦ **ADIM 2: Proje KÃ¼tÃ¼phaneleri**
*Proje klasÃ¶rÃ¼nde bu komutlarÄ± Ã§alÄ±ÅŸtÄ±rÄ±n.*

### **2.1 Gerekli NPM Paketleri**
- [ ] **2.1.1** BullMQ kurulumu: `npm install bullmq`
- [ ] **2.1.2** Dosya kontrol araÃ§larÄ±: `npm install file-type multer`
- [ ] **2.1.3** Rate limiting: `npm install express-rate-limit`
- [ ] **2.1.4** Redis client: `npm install redis`
- [ ] **2.1.5** ClamAV wrapper: `npm install clamscan`

---

## ğŸ›¡ï¸ **ADIM 3: GÃ¼venlik ve DoÄŸrulama Sistemi**

### **3.1 Dosya Boyut ve Format KontrolÃ¼**
- [ ] **3.1.1** Multer middleware'ini 250MB limit ile yapÄ±landÄ±r
- [ ] **3.1.2** `file-type` ile gerÃ§ek MIME type kontrolÃ¼ ekle
- [ ] **3.1.3** Sadece video formatlarÄ±na izin ver (mp4, avi, mov, mkv)
- [ ] **3.1.4** AntivirÃ¼s taramasÄ±nÄ± upload sonrasÄ± ekle

### **3.2 Rate Limiting Sistemi**
- [ ] **3.2.1** IP bazlÄ± rate limiting ekle (15 dakikada 5 istek)
- [ ] **3.2.2** Rate limit aÅŸÄ±mÄ±nda uyarÄ± mesajÄ± gÃ¶ster
- [ ] **3.2.3** Redis ile rate limit verilerini sakla

### **3.3 GeÃ§ici Dosya Temizleme**
- [ ] **3.3.1** DÃ¶nÃ¼ÅŸtÃ¼rme sonrasÄ± otomatik silme sistemi yaz
- [ ] **3.3.2** BaÅŸarÄ±sÄ±z iÅŸlemler iÃ§in de temizlik ekle
- [ ] **3.3.3** Sistem baÅŸlatÄ±lÄ±rken eski dosyalarÄ± temizle

---

## ğŸ­ **ADIM 4: Santral ve Fabrika Mimarisi**

### **4.1 Worker (Ä°ÅŸÃ§i) Sistemi Kurulumu**
- [ ] **4.1.1** `worker.js` dosyasÄ±nÄ± oluÅŸtur
- [ ] **4.1.2** Redis queue dinleme sistemini yaz
- [ ] **4.1.3** FFmpeg dÃ¶nÃ¼ÅŸtÃ¼rme iÅŸlemini worker'a taÅŸÄ±
- [ ] **4.1.4** Hata yÃ¶netimi ve logging ekle

### **4.2 Web Server (Santral) GÃ¼ncelleme**
- [ ] **4.2.1** `routes/mp4-mp3.js` dosyasÄ±nÄ± gÃ¼ncelle
- [ ] **4.2.2** FFmpeg komutunu kaldÄ±r, job queue ekle
- [ ] **4.2.3** Ä°ÅŸ durumu takip sistemi ekle
- [ ] **4.2.4** WebSocket ile real-time durum gÃ¼ncellemesi

### **4.3 PM2 Proses YÃ¶neticisi**
- [ ] **4.3.1** PM2 ecosystem dosyasÄ± oluÅŸtur
- [ ] **4.3.2** Server.js ve worker.js'i PM2'ye ekle
- [ ] **4.3.3** PM2 startup script kurulumu
- [ ] **4.3.4** PM2 monitoring ve restart policy ayarla

---

## âš¡ **ADIM 5: Performans OptimizasyonlarÄ±**

### **5.1 RAM Disk Kurulumu**
- [ ] **5.1.1** 4GB tmpfs oluÅŸtur: `sudo mount -t tmpfs -o size=4G,mode=1777 tmpfs /tmp/videoconv`
- [ ] **5.1.2** /etc/fstab'a kalÄ±cÄ± mount ekle
- [ ] **5.1.3** Uygulama kodunda tmpfs path kullanÄ±mÄ±nÄ± ayarla
- [ ] **5.1.4** RAM disk doluluk kontrolÃ¼ ekle

### **5.2 Multi-Worker Sistemi**
- [ ] **5.2.1** PM2'yi 3 worker instance ile ayarla
- [ ] **5.2.2** CPU affinity ayarlama: `taskset` kullan
- [ ] **5.2.3** Worker load balancing stratejisi belirle
- [ ] **5.2.4** Worker health check sistemi ekle

### **5.3 Intel Cascade Lake Optimizasyonu**
- [ ] **5.3.1** FFmpeg parametrelerini Intel CPU iÃ§in optimize et
- [ ] **5.3.2** AVX-512 instruction set kullanÄ±mÄ±nÄ± aktifleÅŸtir
- [ ] **5.3.3** Thread sayÄ±sÄ±nÄ± 3 olarak ayarla
- [ ] **5.3.4** Memory buffer boyutlarÄ±nÄ± artÄ±r

### **5.4 AkÄ±llÄ± Queue Sistemi**
- [ ] **5.4.1** 3 farklÄ± queue oluÅŸtur (express, normal, heavy)
- [ ] **5.4.2** Dosya boyutuna gÃ¶re queue routing ekle
- [ ] **5.4.3** Priority-based job processing
- [ ] **5.4.4** Queue monitoring dashboard

---

## ğŸŒ **ADIM 6: Network ve CDN Optimizasyonu**

### **6.1 Static IP ve Domain Setup**
- [ ] **6.1.1** Domain'i static IP'ye yÃ¶nlendir (34.118.206.112)
- [ ] **6.1.2** SSL sertifikasÄ± kurulumu (Let's Encrypt)
- [ ] **6.1.3** HTTPS redirect'leri ayarla
- [ ] **6.1.4** Security headers ekle

### **6.2 Cloudflare CDN Entegrasyonu**
- [ ] **6.2.1** Cloudflare account kurulumu
- [ ] **6.2.2** A record yapÄ±landÄ±rmasÄ±
- [ ] **6.2.3** Caching rules ayarlama
- [ ] **6.2.4** DDoS protection aktifleÅŸtirme

### **6.3 Parallel Upload Sistemi**
- [ ] **6.3.1** Multer'da chunk upload ayarlarÄ±
- [ ] **6.3.2** Progress bar implementasyonu
- [ ] **6.3.3** Upload retry mechanism
- [ ] **6.3.4** Bandwidth optimization

---

## ğŸ”’ **ADIM 7: GeliÅŸmiÅŸ GÃ¼venlik** 

### **7.1 Docker Ä°zolasyonu**
- [ ] **7.1.1** FFmpeg iÃ§in Docker image oluÅŸtur
- [ ] **7.1.2** Container resource limits ayarla
- [ ] **7.1.3** Worker'larÄ± container'da Ã§alÄ±ÅŸtÄ±r
- [ ] **7.1.4** Container monitoring ekle

### **7.2 Sistem GÃ¼venliÄŸi**
- [ ] **7.2.1** DÃ¼ÅŸÃ¼k yetkili user oluÅŸtur
- [ ] **7.2.2** Worker process'leri restricted user ile Ã§alÄ±ÅŸtÄ±r
- [ ] **7.2.3** Firewall kurallarÄ± ayarla
- [ ] **7.2.4** Log rotation ve monitoring

---

## âœ… **ADIM 8: Test ve Deployment**

### **8.1 Sistem Testleri**
- [ ] **8.1.1** KÃ¼Ã§Ã¼k dosya (5MB) dÃ¶nÃ¼ÅŸtÃ¼rme testi
- [ ] **8.1.2** BÃ¼yÃ¼k dosya (250MB) dÃ¶nÃ¼ÅŸtÃ¼rme testi
- [ ] **8.1.3** 3 paralel dÃ¶nÃ¼ÅŸtÃ¼rme stress testi
- [ ] **8.1.4** Rate limiting testi
- [ ] **8.1.5** AntivirÃ¼s tarama testi

### **8.2 Monitoring ve Logging**
- [ ] **8.2.1** PM2 monitoring kurulumu
- [ ] **8.2.2** System resource monitoring (htop, iotop)
- [ ] **8.2.3** Error logging sistemi
- [ ] **8.2.4** Performance metrics toplama

### **8.3 Backup ve Recovery**
- [ ] **8.3.1** Kod backup stratejisi
- [ ] **8.3.2** Redis data backup
- [ ] **8.3.3** System snapshot alma
- [ ] **8.3.4** Recovery prosedÃ¼rÃ¼ dÃ¶kÃ¼mantasyonu

---

## ğŸ“Š **Beklenen SonuÃ§lar**
- âœ… **GÃ¼nlÃ¼k Kapasite**: 1,000-1,500 dÃ¶nÃ¼ÅŸtÃ¼rme
- âœ… **DÃ¶nÃ¼ÅŸtÃ¼rme HÄ±zÄ±**: 5dk video â†’ 45-60 saniye
- âœ… **Paralel Ä°ÅŸlem**: 3 eÅŸzamanlÄ± dÃ¶nÃ¼ÅŸtÃ¼rme
- âœ… **Uptime**: %99.9+ (PM2 + monitoring ile)
- âœ… **GÃ¼venlik**: Enterprise-level koruma

---

## ğŸ¯ **Critical Path (En Ã–nemli AdÄ±mlar)**
Bu adÄ±mlarÄ± Ã¶ncelikle tamamlayÄ±n:
1. **ADIM 1-3**: Temel sistem + gÃ¼venlik
2. **ADIM 4**: Worker sistemi (en kritik!)
3. **ADIM 5.1-5.2**: RAM disk + multi-worker
4. **ADIM 8.1**: Test etme

Bu checklist'i tamamladÄ±ÄŸÄ±nÄ±zda production-ready bir converter siteniz olacak! ğŸš€